#!/usr/bin/env node

var tapSpec = require('../')
var options = {}

if ((process.argv.indexOf('--min') > -1) ||
  (process.argv.indexOf('-m') > -1)) {
  options.min = true
}

var stream = tapSpec(options)

process.stdin
  .pipe(stream)
  .pipe(process.stdout)

process.on('exit', function (status) {
  if (status === 1) {
    process.exit(1)
  }

  if (stream.failed) {
    process.exit(1)
  }
})
